
# Модель данных обращений

## Объекты

### Обращение (Ticket)
- **`id`**: UUID  
- **`created_at`**: datetime  
- **`user_id`**: string (ID пользователя)  
- **`channel`**: string (web / mobile / api)  
- **`text`**: string (оригинальный запрос пользователя)  
- **`normalized_text`**: string (нормализованный запрос)  
- **`category`**: enum {Аутентификация, Оплата, Ошибки, Банкоматы, Мобильное приложение, Другое} (категория запроса, например, запросы о входе, переводах, или банкоматах)  
- **`confidence`**: float (0.0–1.0, уверенность классификатора в категории)  
- **`status`**: enum {новое, в работе, ожидает обработки, передано оператору, закрыто} (текущий статус обращения)

### Действие (Action)
- **`id`**: UUID  
- **`ticket_id`**: UUID (ссылка на тикет, с которым связано действие)  
- **`type`**: enum {FAQ, LLM, Escalation, ExternalCall, MobileApp} (тип действия, например, поиск в FAQ, использование языковой модели, эскалация к оператору)  
- **`input`**: string (данные для выполнения действия, например, запрос на оплату или восстановление пароля)  
- **`output`**: string (результат выполнения действия, например, ответ от FAQ или решение, сгенерированное языковой моделью)  
- **`timestamp`**: datetime  

### Ответ (Answer)
- **`id`**: UUID  
- **`ticket_id`**: UUID (ссылка на тикет, к которому привязан ответ)  
- **`source`**: enum {FAQ, GPT-OSS, Gemma, Mistral, Operator} (источник ответа, например, ответ из FAQ, языковой модели или оператор)  
- **`text`**: string (финальный ответ пользователю, например, «Для восстановления пароля перейдите по ссылке» или «Мы перезвоним вам в ближайшее время»)  
- **`confidence`**: float (уверенность в ответе, например, если ответ был сгенерирован ИИ, уверенность может быть ниже, чем если бы его дал оператор)  
- **`created_at`**: datetime  
